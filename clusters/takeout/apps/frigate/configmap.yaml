apiVersion: v1
kind: ConfigMap
metadata:
  name: frigate-config
data:
  config.yml: |
    mqtt:
      host: mosquitto
    # ffmpeg:
    #   hwaccel_args:
    #     - -hwaccel
    #     - vaapi
    #     - -hwaccel_device
    #     - /dev/dri/renderD128
    #     - -hwaccel_output_format
    #     - yuv420p
    cameras:
      frontdoor:
        clips:
          enabled: true
        snapshots:
          timestamp: true
        motion:
          mask:
            - 0,390,190,281,413,219,612,181,842,131,1149,113,1138,0,0,0
        ffmpeg:
          inputs:
            - path: 'rtsp://{FRIGATE_FRONTDOOR_CREDENTIALS}@frontdoor:554'
              roles:
                - detect
                - rtmp
                - clips
        width: 1280
        height: 720
        fps: 5
      backdoor:
        clips:
          enabled: true
        snapshots:
          timestamp: true
        ffmpeg:
          inputs:
            - path: 'rtsp://{FRIGATE_BACKDOOR_CREDENTIALS}@backdoor:554/live'
              roles:
                - detect
                - rtmp
                - clips
        width: 1920
        height: 1080
        fps: 5
      driveway:
        clips:
          enabled: true
        snapshots:
          timestamp: true
        motion:
          mask:
            - 1820,127,1775,335,1605,1080,1920,1080,1920,252,1920,0,1252,0,1443,45
            - 595,687,218,948,172,865,538,627
        objects:
          filters:
            person:
              mask: 
              - 1820,127,1775,335,1605,1080,1920,1080,1920,252,1920,0,1252,0,1443,45
              - 595,687,218,948,172,865,538,627
        ffmpeg:
          inputs:
            - path: 'rtsp://{FRIGATE_DRIVEWAY_CREDENTIALS}@driveway:554/live'
              roles:
                - detect
                - rtmp
                - clips
        width: 1920
        height: 1080
        fps: 5
      porch:
        clips:
          enabled: true
        snapshots:
          timestamp: true
        ffmpeg:
          inputs:
            - path: 'rtsp://{FRIGATE_PORCH_CREDENTIALS}@porch:554/live'
              roles:
                - detect
                - rtmp
                - clips
        width: 2688
        height: 1520
        fps: 5
    clips:
      max_seconds: 300
      retain:
        default: 30
    detectors:
      coral:
        type: edgetpu
        device: usb
