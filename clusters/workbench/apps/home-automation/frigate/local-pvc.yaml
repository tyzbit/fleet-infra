apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: frigate-data-local
  namespace: home-automation
spec:
  resources:
    requests:
      storage: 10Gi
  volumeMode: Filesystem
  storageClassName: local-path
  accessModes:
    - ReadWriteOnce
---
apiVersion: volsync.backube/v1alpha1
kind: ReplicationSource
metadata:
  name: frigate-data-local
  namespace: home-automation
spec:
  sourcePVC: frigate-data-local
  trigger:
    schedule: "*/5 * * * *"
  rsyncTLS:
    keySecret: volsync-nas
    address: nas.home.arpa:/volume1/workbench_backups/frigate
    copyMethod: Clone
---
apiVersion: volsync.backube/v1alpha1
kind: ReplicationDestination
metadata:
  name: frigate-nas
  namespace: home-automation
spec:
  rsyncTLS:
    copyMethod: Snapshot
    capacity: 10Gi
    accessModes: ["ReadWriteOnce"]
    storageClassName: local-path
    volumeSnapshotClassName: nas
